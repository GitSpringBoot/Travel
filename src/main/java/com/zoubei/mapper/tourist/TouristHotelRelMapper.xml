<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zoubei.mapper.tourist.TouristHotelRelMapper" >
  <resultMap id="BaseResultMap" type="com.zoubei.entity.tourist.TouristHotelRel" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    <id column="thr_id" property="thrId" jdbcType="INTEGER" />
    <result column="tourist_id" property="touristId" jdbcType="INTEGER" />
    <result column="hotel_id" property="hotelId" jdbcType="INTEGER" />
    <result column="thr_goaddress" property="thrGoaddress" jdbcType="VARCHAR" />
    <result column="thr_date" property="thrDate" jdbcType="TIMESTAMP" />
    <result column="thr_num" property="thrNum" jdbcType="INTEGER" />
    <result column="thr_other" property="thrOther" jdbcType="VARCHAR" />
    <result column="tourist_nickname" property="touristNickname" jdbcType="VARCHAR" />
    <result column="hotel_hotelname" property="hotelHotelname" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    thr_id, tourist_id, hotel_id, thr_goaddress, thr_date, thr_num, thr_other
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from tra_tourist_hotel_rel
    where thr_id = #{thrId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    delete from tra_tourist_hotel_rel
    where thr_id = #{thrId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.zoubei.entity.tourist.TouristHotelRel" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    insert into tra_tourist_hotel_rel (thr_id, tourist_id, hotel_id, 
      thr_goaddress, thr_date, thr_num, 
      thr_other)
    values (#{thrId,jdbcType=INTEGER}, #{touristId,jdbcType=INTEGER}, #{hotelId,jdbcType=INTEGER}, 
      #{thrGoaddress,jdbcType=VARCHAR}, #{thrDate,jdbcType=TIMESTAMP}, #{thrNum,jdbcType=INTEGER}, 
      #{thrOther,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.zoubei.entity.tourist.TouristHotelRel" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    insert into tra_tourist_hotel_rel
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="thrId != null" >
        thr_id,
      </if>
      <if test="touristId != null" >
        tourist_id,
      </if>
      <if test="hotelId != null" >
        hotel_id,
      </if>
      <if test="thrGoaddress != null" >
        thr_goaddress,
      </if>
      <if test="thrDate != null" >
        thr_date,
      </if>
      <if test="thrNum != null" >
        thr_num,
      </if>
      <if test="thrOther != null" >
        thr_other,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="thrId != null" >
        #{thrId,jdbcType=INTEGER},
      </if>
      <if test="touristId != null" >
        #{touristId,jdbcType=INTEGER},
      </if>
      <if test="hotelId != null" >
        #{hotelId,jdbcType=INTEGER},
      </if>
      <if test="thrGoaddress != null" >
        #{thrGoaddress,jdbcType=VARCHAR},
      </if>
      <if test="thrDate != null" >
        #{thrDate,jdbcType=TIMESTAMP},
      </if>
      <if test="thrNum != null" >
        #{thrNum,jdbcType=INTEGER},
      </if>
      <if test="thrOther != null" >
        #{thrOther,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zoubei.entity.tourist.TouristHotelRel" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    update tra_tourist_hotel_rel
    <set >
      <if test="touristId != null" >
        tourist_id = #{touristId,jdbcType=INTEGER},
      </if>
      <if test="hotelId != null" >
        hotel_id = #{hotelId,jdbcType=INTEGER},
      </if>
      <if test="thrGoaddress != null" >
        thr_goaddress = #{thrGoaddress,jdbcType=VARCHAR},
      </if>
      <if test="thrDate != null" >
        thr_date = #{thrDate,jdbcType=TIMESTAMP},
      </if>
      <if test="thrNum != null" >
        thr_num = #{thrNum,jdbcType=INTEGER},
      </if>
      <if test="thrOther != null" >
        thr_other = #{thrOther,jdbcType=VARCHAR},
      </if>
    </set>
    where thr_id = #{thrId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zoubei.entity.tourist.TouristHotelRel" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:18:03 CST 2018.
    -->
    update tra_tourist_hotel_rel
    set tourist_id = #{touristId,jdbcType=INTEGER},
      hotel_id = #{hotelId,jdbcType=INTEGER},
      thr_goaddress = #{thrGoaddress,jdbcType=VARCHAR},
      thr_date = #{thrDate,jdbcType=TIMESTAMP},
      thr_num = #{thrNum,jdbcType=INTEGER},
      thr_other = #{thrOther,jdbcType=VARCHAR}
    where thr_id = #{thrId,jdbcType=INTEGER}
  </update>
  
  <!-- selectOrderByHotelList -->
  <select id="selectOrderByHotelList" resultMap="BaseResultMap">
  	select 
		t.thr_id,
		t.tourist_id,
		u.tourist_nickname,
		t.hotel_id,
		s.hotel_hotelname,
		t.thr_goaddress,
		t.thr_date,
		t.thr_num,
		t.thr_other
	from 
	tra_tourist_hotel_rel t ,tra_hotel s ,tra_tourist u 
	where t.tourist_id=u.tourist_id and t.hotel_id=s.hotel_id
  </select>
  
  <!-- selectOrderByGroupHotelList -->
  <select id="selectOrderByGroupHotelList" parameterType="java.lang.Integer" resultMap="BaseResultMap">
		select 
			r.thr_id,
			r.tourist_id,
			t.tourist_nickname,
			r.hotel_id,
			h.hotel_hotelname,
			r.thr_goaddress,
			r.thr_date,
			r.thr_num,
			r.thr_other
		from tra_tourist_hotel_rel r , tra_hotel h ,tra_tourist t where r.tourist_id=t.tourist_id and r.hotel_id=h.hotel_id and r.hotel_id in (
		   select hotel_id from tra_hotel where hotel_id in (
		     select hotel_id from tra_hotel_group_rel where hgp_id in (
		       select hgp_id from tra_hotel_group where hgp_id = #{hgpId,jdbcType=INTEGER}
		     ) 
		   )
		 )  
  </select>
</mapper>