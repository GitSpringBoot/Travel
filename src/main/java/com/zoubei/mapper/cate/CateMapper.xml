<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zoubei.mapper.cate.CateMapper" >
  <resultMap id="BaseResultMap" type="com.zoubei.entity.cate.Cate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    <id column="cate_id" property="cateId" jdbcType="INTEGER" />
    <result column="cate_shopname" property="cateShopname" jdbcType="VARCHAR" />
    <result column="area_id" property="areaId" jdbcType="INTEGER" />
    <result column="cate_address" property="cateAddress" jdbcType="VARCHAR" />
    <result column="level_id" property="levelId" jdbcType="INTEGER" />
    <result column="cate_sales" property="cateSales" jdbcType="INTEGER" />
    <result column="cate_message" property="cateMessage" jdbcType="VARCHAR" />
    <result column="cate_tel" property="cateTel" jdbcType="VARCHAR" />
    <result column="cate_logo" property="cateLogo" jdbcType="VARCHAR" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    cate_id, cate_shopname, area_id, cate_address, level_id, cate_sales, cate_message, 
    cate_tel, cate_logo
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from tra_cate
    where cate_id = #{cateId,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    delete from tra_cate
    where cate_id = #{cateId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.zoubei.entity.cate.Cate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    insert into tra_cate (cate_id, cate_shopname, area_id, 
      cate_address, level_id, cate_sales, 
      cate_message, cate_tel, cate_logo
      )
    values (#{cateId,jdbcType=INTEGER}, #{cateShopname,jdbcType=VARCHAR}, #{areaId,jdbcType=INTEGER}, 
      #{cateAddress,jdbcType=VARCHAR}, #{levelId,jdbcType=INTEGER}, #{cateSales,jdbcType=INTEGER}, 
      #{cateMessage,jdbcType=VARCHAR}, #{cateTel,jdbcType=VARCHAR}, #{cateLogo,jdbcType=VARCHAR}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.zoubei.entity.cate.Cate" useGeneratedKeys="true" keyProperty="cateId">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    insert into tra_cate
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="cateId != null" >
        cate_id,
      </if>
      <if test="cateShopname != null" >
        cate_shopname,
      </if>
      <if test="areaId != null" >
        area_id,
      </if>
      <if test="cateAddress != null" >
        cate_address,
      </if>
      <if test="levelId != null" >
        level_id,
      </if>
      <if test="cateSales != null" >
        cate_sales,
      </if>
      <if test="cateMessage != null" >
        cate_message,
      </if>
      <if test="cateTel != null" >
        cate_tel,
      </if>
      <if test="cateLogo != null" >
        cate_logo,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="cateId != null" >
        #{cateId,jdbcType=INTEGER},
      </if>
      <if test="cateShopname != null" >
        #{cateShopname,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null" >
        #{areaId,jdbcType=INTEGER},
      </if>
      <if test="cateAddress != null" >
        #{cateAddress,jdbcType=VARCHAR},
      </if>
      <if test="levelId != null" >
        #{levelId,jdbcType=INTEGER},
      </if>
      <if test="cateSales != null" >
        #{cateSales,jdbcType=INTEGER},
      </if>
      <if test="cateMessage != null" >
        #{cateMessage,jdbcType=VARCHAR},
      </if>
      <if test="cateTel != null" >
        #{cateTel,jdbcType=VARCHAR},
      </if>
      <if test="cateLogo != null" >
        #{cateLogo,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.zoubei.entity.cate.Cate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    update tra_cate
    <set >
      <if test="cateShopname != null" >
        cate_shopname = #{cateShopname,jdbcType=VARCHAR},
      </if>
      <if test="areaId != null" >
        area_id = #{areaId,jdbcType=INTEGER},
      </if>
      <if test="cateAddress != null" >
        cate_address = #{cateAddress,jdbcType=VARCHAR},
      </if>
      <if test="levelId != null" >
        level_id = #{levelId,jdbcType=INTEGER},
      </if>
      <if test="cateSales != null" >
        cate_sales = #{cateSales,jdbcType=INTEGER},
      </if>
      <if test="cateMessage != null" >
        cate_message = #{cateMessage,jdbcType=VARCHAR},
      </if>
      <if test="cateTel != null" >
        cate_tel = #{cateTel,jdbcType=VARCHAR},
      </if>
      <if test="cateLogo != null" >
        cate_logo = #{cateLogo,jdbcType=VARCHAR},
      </if>
    </set>
    where cate_id = #{cateId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.zoubei.entity.cate.Cate" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Apr 15 15:04:11 CST 2018.
    -->
    update tra_cate
    set cate_shopname = #{cateShopname,jdbcType=VARCHAR},
      area_id = #{areaId,jdbcType=INTEGER},
      cate_address = #{cateAddress,jdbcType=VARCHAR},
      level_id = #{levelId,jdbcType=INTEGER},
      cate_sales = #{cateSales,jdbcType=INTEGER},
      cate_message = #{cateMessage,jdbcType=VARCHAR},
      cate_tel = #{cateTel,jdbcType=VARCHAR},
      cate_logo = #{cateLogo,jdbcType=VARCHAR}
    where cate_id = #{cateId,jdbcType=INTEGER}
  </update>
  
  <!-- selectCateBySceneAreaId 排序美食商家 销量-->
  <select id="selectCateBySceneAreaId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
  		select 
			cate_id,
			cate_shopname,
			area_id,
			cate_address,
			level_id,
			cate_sales,
			cate_message,
			cate_tel,
			cate_logo
		from tra_cate where area_id=#{areaId} order by cate_sales desc limit 2
  </select>
  
  <!-- selectCateList -->
  <select id="selectCateList" parameterType="java.lang.Integer" resultMap="BaseResultMap">
  	select 
		c.cate_id,
		c.cate_shopname,
		c.area_id,
		c.cate_address,
		c.level_id,
		c.cate_sales,
		c.cate_message,
		c.cate_tel,
		c.cate_logo
	from tra_area t left join tra_cate c on t.area_pid=#{areaId} and t.area_id=c.area_id where c.cate_id is not null 
  </select>
  
  <!-- selectCateByFoodsId 每个美食所属店铺 -->
  <select id="selectCateByFoodsId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
	  select 
			c.cate_id,
			c.cate_shopname,
			c.area_id,
			c.level_id,
			c.cate_sales,
			c.cate_message,
			c.cate_tel,
			c.cate_logo
	from tra_cate_food_rel f , tra_cate c , tra_foods s where f.cate_id=c.cate_id and f.food_id=s.food_id  and s.food_id=#{foodId,jdbcType=INTEGER}
  </select>
  
  <!-- selectCateListAll -->
  <select id="selectCateListAll" resultMap="BaseResultMap">
  		select 
			cate_id,
			cate_shopname,
			area_id,
			cate_address,
			level_id,
			cate_sales,
			cate_message,
			cate_tel,
			cate_logo
		from tra_cate
  </select>
  
  <!-- selectCateByGroup -->
  <select id="selectCateByGroup" parameterType="java.lang.Integer" resultMap="BaseResultMap">
  		select
			c.cate_id,
			c.cate_shopname,
			c.area_id,
			c.cate_address,
			c.level_id,
			c.cate_sales,
			c.cate_message,
			c.cate_tel,
			c.cate_logo 
		from tra_cate c ,tra_cate_group_rel g ,tra_cate_group t where c.cate_id=g.cate_id and g.cgp_id=t.cgp_id and t.cgp_id=#{cgpId,jdbcType=INTEGER}
  		
  </select>
  
  <!-- selectCateListAll -->
  <select id="selectCateListAlls" parameterType="java.lang.Integer" resultMap="BaseResultMap">
  
  	select cate_id,
		cate_shopname,
		area_id,
		cate_address,
		level_id,
		cate_sales,
		cate_message,
		cate_tel,
		cate_logo 
	from tra_cate where cate_id in (
	select cate_id from tra_cate_group_rel where cgp_id in (
	select cgp_id from tra_cate_group where cgp_id=#{cgpId,jdbcType=INTEGER}
	)
  )
  </select>
</mapper>